{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/home/teraoka/app/note/components/writer.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useRef } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { cacheData, getCache } from '../cache/cache';\nimport { splitVertical, buttons, editor } from '../styles/styles';\nimport { windowHeight } from '../states/windowSize';\nimport { BackButton } from './backButton';\nimport { SaveButton } from './saveButton';\nimport { isWriteMode } from '../states/appMode';\nimport { viewingNote } from '../states/viewingNote';\nvar Mode;\n\n(function (Mode) {\n  Mode[Mode[\"IN\"] = 0] = \"IN\";\n  Mode[Mode[\"OUT\"] = 1] = \"OUT\";\n})(Mode || (Mode = {}));\n\nexport var Writer = function Writer() {\n  _s();\n\n  // states\n  var _useState = useState(isWriteMode() ? getCache('writing') || '# Markdown Editor\\n\\nwrite a note here' : viewingNote.text),\n      src = _useState[0],\n      setSrc = _useState[1];\n\n  var _useState2 = useState(Mode.IN),\n      mode = _useState2[0],\n      setMode = _useState2[1]; // reference to child components\n\n\n  var inputElement = useRef(null);\n  var outputElement = useRef(null);\n  return __jsx(\"div\", {\n    style: {\n      height: '100%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    style: buttons,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }, __jsx(SaveButton, {\n    src: src,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }), __jsx(BackButton, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  })), __jsx(\"textarea\", {\n    style: editor,\n    onChange: function onChange(e) {\n      setSrc(e.target.value);\n      cacheData('writing', src);\n    },\n    onMouseEnter: function onMouseEnter() {\n      return setMode(Mode.IN);\n    },\n    onTouchStart: function onTouchStart() {\n      return setMode(Mode.IN);\n    },\n    onScroll: function onScroll(e) {\n      if (mode == Mode.IN) {\n        outputElement.current.scrollTop = e.currentTarget.scrollTop / (e.currentTarget.scrollHeight - windowHeight) * (outputElement.current.scrollHeight - windowHeight);\n      }\n    },\n    ref: inputElement,\n    value: src,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    style: Object.assign({\n      overflow: 'auto',\n      margin: '1% 2%'\n    }, splitVertical(50, 100)),\n    onMouseEnter: function onMouseEnter() {\n      return setMode(Mode.OUT);\n    },\n    onTouchStart: function onTouchStart() {\n      return setMode(Mode.OUT);\n    },\n    onScroll: function onScroll(e) {\n      if (mode == Mode.OUT) {\n        inputElement.current.scrollTop = e.currentTarget.scrollTop / (e.currentTarget.scrollHeight - windowHeight) * (inputElement.current.scrollHeight - windowHeight);\n      }\n    },\n    ref: outputElement,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, __jsx(ReactMarkdown, {\n    source: src,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  })));\n};\n\n_s(Writer, \"NVP8QwNt/6cBNR8lkxSRZ3xZplE=\");\n\n_c = Writer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Writer\");","map":{"version":3,"sources":["/home/teraoka/app/note/components/writer.tsx"],"names":["useState","useRef","ReactMarkdown","cacheData","getCache","splitVertical","buttons","editor","windowHeight","BackButton","SaveButton","isWriteMode","viewingNote","Mode","Writer","text","src","setSrc","IN","mode","setMode","inputElement","outputElement","height","e","target","value","current","scrollTop","currentTarget","scrollHeight","Object","assign","overflow","margin","OUT"],"mappings":"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","sourcesContent":["import { useState, useRef } from 'react'\nimport ReactMarkdown from 'react-markdown'\nimport { cacheData, getCache } from '../cache/cache'\nimport { splitVertical, buttons, editor } from '../styles/styles'\nimport { windowHeight } from '../states/windowSize'\nimport { BackButton } from './backButton'\nimport { SaveButton } from './saveButton'\nimport { isWriteMode } from '../states/appMode'\nimport { viewingNote } from '../states/viewingNote'\n\nenum Mode {\n  IN,\n  OUT,\n}\n\nexport const Writer = () => {\n  // states\n  const [src, setSrc] = useState(\n    isWriteMode()\n      ? getCache('writing') || '# Markdown Editor\\n\\nwrite a note here'\n      : viewingNote.text\n  )\n  const [mode, setMode] = useState(Mode.IN)\n\n  // reference to child components\n  const inputElement = useRef(null)\n  const outputElement = useRef(null)\n\n  return (\n    <div\n      style={{\n        height: '100%',\n      }}\n    >\n      <div style={buttons}>\n        <SaveButton src={src}></SaveButton>\n        <BackButton></BackButton>\n      </div>\n      <textarea\n        style={editor}\n        onChange={(e) => {\n          setSrc(e.target.value)\n          cacheData('writing', src)\n        }}\n        onMouseEnter={() => setMode(Mode.IN)}\n        onTouchStart={() => setMode(Mode.IN)}\n        onScroll={(e) => {\n          if (mode == Mode.IN) {\n            outputElement.current.scrollTop =\n              (e.currentTarget.scrollTop /\n                (e.currentTarget.scrollHeight - windowHeight)) *\n              (outputElement.current.scrollHeight - windowHeight)\n          }\n        }}\n        ref={inputElement}\n        value={src}\n      ></textarea>\n      <div\n        style={Object.assign(\n          { overflow: 'auto', margin: '1% 2%' },\n          splitVertical(50, 100)\n        )}\n        onMouseEnter={() => setMode(Mode.OUT)}\n        onTouchStart={() => setMode(Mode.OUT)}\n        onScroll={(e) => {\n          if (mode == Mode.OUT) {\n            inputElement.current.scrollTop =\n              (e.currentTarget.scrollTop /\n                (e.currentTarget.scrollHeight - windowHeight)) *\n              (inputElement.current.scrollHeight - windowHeight)\n          }\n        }}\n        ref={outputElement}\n      >\n        <ReactMarkdown source={src}></ReactMarkdown>\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}