{"ast":null,"code":"import { MongoClient } from 'mongodb';\nconst DB_ADDRESS_PORT = 'mongodb://localhost:27017';\nconst DB_NAME = 'mongodb';\nexport function insertDocument(collectionName, document) {\n  getCollection(collectionName).insertOne(document);\n}\nexport function findDocuments(collectionName, filter, reconnects) {\n  let documents = [];\n  getCollection(collectionName).find(filter).toArray((err, docs) => documents = docs);\n  return documents;\n}\n/**\n * @private\n */\n\nfunction getCollection(collectionName) {\n  let collection;\n  MongoClient.connect(DB_ADDRESS_PORT, (err, client) => {\n    collection = client.db(DB_NAME).collection(collectionName);\n    client.close();\n  });\n  return collection;\n}","map":{"version":3,"sources":["/home/teraoka/app/note/logic/mongoAPI.ts"],"names":["MongoClient","DB_ADDRESS_PORT","DB_NAME","insertDocument","collectionName","document","getCollection","insertOne","findDocuments","filter","reconnects","documents","find","toArray","err","docs","collection","connect","client","db","close"],"mappings":"AAAA,SAASA,WAAT,QAA4C,SAA5C;AAEA,MAAMC,eAAe,GAAG,2BAAxB;AACA,MAAMC,OAAO,GAAG,SAAhB;AAEA,OAAO,SAASC,cAAT,CAAwBC,cAAxB,EAAgDC,QAAhD,EAAkE;AACvEC,EAAAA,aAAa,CAACF,cAAD,CAAb,CAA8BG,SAA9B,CAAwCF,QAAxC;AACD;AAED,OAAO,SAASG,aAAT,CACLJ,cADK,EAELK,MAFK,EAGLC,UAHK,EAIE;AACP,MAAIC,SAAS,GAAG,EAAhB;AACAL,EAAAA,aAAa,CAACF,cAAD,CAAb,CACGQ,IADH,CACQH,MADR,EAEGI,OAFH,CAEW,CAACC,GAAD,EAAMC,IAAN,KAAgBJ,SAAS,GAAGI,IAFvC;AAGA,SAAOJ,SAAP;AACD;AAED;;;;AAGA,SAASL,aAAT,CAAuBF,cAAvB,EAAgE;AAC9D,MAAIY,UAAJ;AACAhB,EAAAA,WAAW,CAACiB,OAAZ,CAAoBhB,eAApB,EAAqC,CAACa,GAAD,EAAMI,MAAN,KAAiB;AACpDF,IAAAA,UAAU,GAAGE,MAAM,CAACC,EAAP,CAAUjB,OAAV,EAAmBc,UAAnB,CAA8BZ,cAA9B,CAAb;AACAc,IAAAA,MAAM,CAACE,KAAP;AACD,GAHD;AAIA,SAAOJ,UAAP;AACD","sourcesContent":["import { MongoClient, Db, Collection } from 'mongodb'\n\nconst DB_ADDRESS_PORT = 'mongodb://localhost:27017'\nconst DB_NAME = 'mongodb'\n\nexport function insertDocument(collectionName: string, document: object) {\n  getCollection(collectionName).insertOne(document)\n}\n\nexport function findDocuments(\n  collectionName: string,\n  filter: object,\n  reconnects?: boolean\n): any[] {\n  let documents = []\n  getCollection(collectionName)\n    .find(filter)\n    .toArray((err, docs) => (documents = docs))\n  return documents\n}\n\n/**\n * @private\n */\nfunction getCollection(collectionName: string): Collection<any> {\n  let collection: Collection<any>\n  MongoClient.connect(DB_ADDRESS_PORT, (err, client) => {\n    collection = client.db(DB_NAME).collection(collectionName)\n    client.close()\n  })\n  return collection\n}\n"]},"metadata":{},"sourceType":"module"}