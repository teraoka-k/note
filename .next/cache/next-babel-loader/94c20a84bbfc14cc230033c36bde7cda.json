{"ast":null,"code":"import { useEffect } from 'react';\nimport { isReadMode, setWriteMode, isWriteMode, isRewriteMode, setReadMode, setRewriteMode } from '../states/appMode';\nimport { deleteNote } from '../states/notes';\nimport { viewingNote, setViewingNote } from '../states/viewingNote';\nexport const useShortcutKeys = () => {\n  useEffect(() => {\n    shortcutKeys.forEach(shortcut => {\n      window.addEventListener(shortcut.event || 'keydown', e => {\n        if (e.key == shortcut.key && (shortcut.alt && e.altKey || !shortcut.alt) && (shortcut.ctrl && e.ctrlKey || !shortcut.ctrl) && (shortcut.meta && e.metaKey || !shortcut.meta) && (shortcut.shift && e.shiftKey || !shortcut.shift)) shortcut.action();\n      });\n    });\n  }, []);\n};\nconst shortcutKeys = [{\n  key: 'a',\n  action: () => {\n    if (isReadMode()) setWriteMode();\n  }\n}, {\n  key: 'Escape',\n  action: () => {\n    if (isWriteMode() || isRewriteMode()) setReadMode();\n  }\n}, {\n  key: 'd',\n  action: () => {\n    if (isReadMode() && viewingNote) {\n      deleteNote(viewingNote);\n      setViewingNote(null);\n    }\n  }\n}, {\n  key: 'm',\n  action: () => {\n    if (isReadMode() && viewingNote) setRewriteMode();\n  }\n}];","map":{"version":3,"sources":["/home/teraoka/app/note/logic/shortcutKeys.ts"],"names":["useEffect","isReadMode","setWriteMode","isWriteMode","isRewriteMode","setReadMode","setRewriteMode","deleteNote","viewingNote","setViewingNote","useShortcutKeys","shortcutKeys","forEach","shortcut","window","addEventListener","event","e","key","alt","altKey","ctrl","ctrlKey","meta","metaKey","shift","shiftKey","action"],"mappings":"AAAA,SAASA,SAAT,QAA+B,OAA/B;AACA,SACEC,UADF,EAEEC,YAFF,EAGEC,WAHF,EAIEC,aAJF,EAKEC,WALF,EAMEC,cANF,QAOO,mBAPP;AAQA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SAASC,WAAT,EAAsBC,cAAtB,QAA4C,uBAA5C;AAEA,OAAO,MAAMC,eAAe,GAAG,MAAY;AACzCV,EAAAA,SAAS,CAAC,MAAM;AACdW,IAAAA,YAAY,CAACC,OAAb,CAAsBC,QAAD,IAAc;AACjCC,MAAAA,MAAM,CAACC,gBAAP,CACEF,QAAQ,CAACG,KAAT,IAAkB,SADpB,EAEGC,CAAD,IAAsB;AACpB,YACEA,CAAC,CAACC,GAAF,IAASL,QAAQ,CAACK,GAAlB,KACEL,QAAQ,CAACM,GAAT,IAAgBF,CAAC,CAACG,MAAnB,IAA8B,CAACP,QAAQ,CAACM,GADzC,MAEEN,QAAQ,CAACQ,IAAT,IAAiBJ,CAAC,CAACK,OAApB,IAAgC,CAACT,QAAQ,CAACQ,IAF3C,MAGER,QAAQ,CAACU,IAAT,IAAiBN,CAAC,CAACO,OAApB,IAAgC,CAACX,QAAQ,CAACU,IAH3C,MAIEV,QAAQ,CAACY,KAAT,IAAkBR,CAAC,CAACS,QAArB,IAAkC,CAACb,QAAQ,CAACY,KAJ7C,CADF,EAOEZ,QAAQ,CAACc,MAAT;AACH,OAXH;AAaD,KAdD;AAeD,GAhBQ,EAgBN,EAhBM,CAAT;AAiBD,CAlBM;AAoBP,MAAMhB,YAA2B,GAAG,CAClC;AACEO,EAAAA,GAAG,EAAE,GADP;AAEES,EAAAA,MAAM,EAAE,MAAM;AACZ,QAAI1B,UAAU,EAAd,EAAkBC,YAAY;AAC/B;AAJH,CADkC,EAOlC;AACEgB,EAAAA,GAAG,EAAE,QADP;AAEES,EAAAA,MAAM,EAAE,MAAM;AACZ,QAAIxB,WAAW,MAAMC,aAAa,EAAlC,EAAsCC,WAAW;AAClD;AAJH,CAPkC,EAalC;AACEa,EAAAA,GAAG,EAAE,GADP;AAEES,EAAAA,MAAM,EAAE,MAAM;AACZ,QAAI1B,UAAU,MAAMO,WAApB,EAAiC;AAC/BD,MAAAA,UAAU,CAACC,WAAD,CAAV;AACAC,MAAAA,cAAc,CAAC,IAAD,CAAd;AACD;AACF;AAPH,CAbkC,EAsBlC;AACES,EAAAA,GAAG,EAAE,GADP;AAEES,EAAAA,MAAM,EAAE,MAAM;AACZ,QAAI1B,UAAU,MAAMO,WAApB,EAAiCF,cAAc;AAChD;AAJH,CAtBkC,CAApC","sourcesContent":["import { useEffect, Key } from 'react'\nimport {\n  isReadMode,\n  setWriteMode,\n  isWriteMode,\n  isRewriteMode,\n  setReadMode,\n  setRewriteMode,\n} from '../states/appMode'\nimport { deleteNote } from '../states/notes'\nimport { viewingNote, setViewingNote } from '../states/viewingNote'\n\nexport const useShortcutKeys = (): void => {\n  useEffect(() => {\n    shortcutKeys.forEach((shortcut) => {\n      window.addEventListener(\n        shortcut.event || 'keydown',\n        (e: KeyboardEvent) => {\n          if (\n            e.key == shortcut.key &&\n            ((shortcut.alt && e.altKey) || !shortcut.alt) &&\n            ((shortcut.ctrl && e.ctrlKey) || !shortcut.ctrl) &&\n            ((shortcut.meta && e.metaKey) || !shortcut.meta) &&\n            ((shortcut.shift && e.shiftKey) || !shortcut.shift)\n          )\n            shortcut.action()\n        }\n      )\n    })\n  }, [])\n}\n\nconst shortcutKeys: ShortcutKey[] = [\n  {\n    key: 'a',\n    action: () => {\n      if (isReadMode()) setWriteMode()\n    },\n  },\n  {\n    key: 'Escape',\n    action: () => {\n      if (isWriteMode() || isRewriteMode()) setReadMode()\n    },\n  },\n  {\n    key: 'd',\n    action: () => {\n      if (isReadMode() && viewingNote) {\n        deleteNote(viewingNote)\n        setViewingNote(null)\n      }\n    },\n  },\n  {\n    key: 'm',\n    action: () => {\n      if (isReadMode() && viewingNote) setRewriteMode()\n    },\n  },\n]\n\ninterface ShortcutKey {\n  key: Key\n  action: () => void\n  event?: keyof WindowEventMap\n  alt?: boolean\n  ctrl?: boolean\n  meta?: boolean\n  shift?: boolean\n}\n"]},"metadata":{},"sourceType":"module"}