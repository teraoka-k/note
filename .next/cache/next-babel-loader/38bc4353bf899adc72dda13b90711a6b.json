{"ast":null,"code":"import { MongoClient } from 'mongodb';\nconst URL = 'mongodb://localhost:27017';\nconst NAME = 'mongodb';\nexport async function insertDocument(collectionName, document) {\n  await crudCollection(collectionName, async collection => await collection.insertOne(document));\n}\nexport async function findDocuments(collectionName, filter) {\n  return await crudCollection(collectionName, async collection => await collection.find(filter).toArray());\n}\nexport async function updateDocument(collectionName, filter, newDocument) {\n  await crudCollection(collectionName, async collection => await collection.updateOne(filter, {\n    $set: newDocument\n  }));\n}\nexport async function deleteDocument(collectionName, filter) {\n  await crudCollection(collectionName, async collection => await collection.deleteOne(filter));\n}\n/**\n * @private\n */\n\nasync function crudCollection(collectionName, method) {\n  let client;\n\n  try {\n    client = await MongoClient.connect(URL, {\n      useNewUrlParser: true\n    });\n    const collection = client.db(NAME).collection(collectionName);\n    return await method(collection);\n  } finally {\n    client.close();\n  }\n}","map":null,"metadata":{},"sourceType":"module"}