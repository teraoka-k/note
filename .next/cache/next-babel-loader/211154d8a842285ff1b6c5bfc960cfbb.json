{"ast":null,"code":"import { useEffect } from 'react';\nimport { isReadMode, setWriteMode, isWriteMode, isRewriteMode, setReadMode } from '../states/appMode';\nexport const useShortcutKeys = () => {\n  useEffect(() => {\n    shortcutKeys.forEach(shortcut => {\n      window.addEventListener(shortcut.event || 'keydown', e => {\n        if ((Array.isArray(shortcut.key) && shortcut.key.some(key => e.key == key) || e.key == shortcut.key) && (shortcut.alt && e.altKey || !shortcut.alt) && (shortcut.ctrl && e.ctrlKey || !shortcut.ctrl) && (shortcut.meta && e.metaKey || !shortcut.meta) && (shortcut.shift && e.shiftKey || !shortcut.shift)) shortcut.action();\n      });\n    });\n  }, []);\n};\nconst shortcutKeys = [{\n  key: 'a',\n  action: () => {\n    if (isReadMode()) setWriteMode();\n  }\n}, {\n  key: ['Escape', 'b'],\n  action: () => {\n    if (isWriteMode() || isRewriteMode()) setReadMode();\n  }\n}];","map":{"version":3,"sources":["/home/teraoka/app/note/logic/shortcutKeys.ts"],"names":["useEffect","isReadMode","setWriteMode","isWriteMode","isRewriteMode","setReadMode","useShortcutKeys","shortcutKeys","forEach","shortcut","window","addEventListener","event","e","Array","isArray","key","some","alt","altKey","ctrl","ctrlKey","meta","metaKey","shift","shiftKey","action"],"mappings":"AAAA,SAASA,SAAT,QAA+B,OAA/B;AACA,SACEC,UADF,EAEEC,YAFF,EAGEC,WAHF,EAIEC,aAJF,EAKEC,WALF,QAMO,mBANP;AAQA,OAAO,MAAMC,eAAe,GAAG,MAAY;AACzCN,EAAAA,SAAS,CAAC,MAAM;AACdO,IAAAA,YAAY,CAACC,OAAb,CAAsBC,QAAD,IAAc;AACjCC,MAAAA,MAAM,CAACC,gBAAP,CACEF,QAAQ,CAACG,KAAT,IAAkB,SADpB,EAEGC,CAAD,IAAsB;AACpB,YACE,CAAEC,KAAK,CAACC,OAAN,CAAcN,QAAQ,CAACO,GAAvB,KACAP,QAAQ,CAACO,GAAT,CAAaC,IAAb,CAAmBD,GAAD,IAASH,CAAC,CAACG,GAAF,IAASA,GAApC,CADD,IAECH,CAAC,CAACG,GAAF,IAASP,QAAQ,CAACO,GAFpB,MAGEP,QAAQ,CAACS,GAAT,IAAgBL,CAAC,CAACM,MAAnB,IAA8B,CAACV,QAAQ,CAACS,GAHzC,MAIET,QAAQ,CAACW,IAAT,IAAiBP,CAAC,CAACQ,OAApB,IAAgC,CAACZ,QAAQ,CAACW,IAJ3C,MAKEX,QAAQ,CAACa,IAAT,IAAiBT,CAAC,CAACU,OAApB,IAAgC,CAACd,QAAQ,CAACa,IAL3C,MAMEb,QAAQ,CAACe,KAAT,IAAkBX,CAAC,CAACY,QAArB,IAAkC,CAAChB,QAAQ,CAACe,KAN7C,CADF,EASEf,QAAQ,CAACiB,MAAT;AACH,OAbH;AAeD,KAhBD;AAiBD,GAlBQ,EAkBN,EAlBM,CAAT;AAmBD,CApBM;AAsBP,MAAMnB,YAA2B,GAAG,CAClC;AACES,EAAAA,GAAG,EAAE,GADP;AAEEU,EAAAA,MAAM,EAAE,MAAM;AACZ,QAAIzB,UAAU,EAAd,EAAkBC,YAAY;AAC/B;AAJH,CADkC,EAOlC;AACEc,EAAAA,GAAG,EAAE,CAAC,QAAD,EAAW,GAAX,CADP;AAEEU,EAAAA,MAAM,EAAE,MAAM;AACZ,QAAIvB,WAAW,MAAMC,aAAa,EAAlC,EAAsCC,WAAW;AAClD;AAJH,CAPkC,CAApC","sourcesContent":["import { useEffect, Key } from 'react'\nimport {\n  isReadMode,\n  setWriteMode,\n  isWriteMode,\n  isRewriteMode,\n  setReadMode,\n} from '../states/appMode'\n\nexport const useShortcutKeys = (): void => {\n  useEffect(() => {\n    shortcutKeys.forEach((shortcut) => {\n      window.addEventListener(\n        shortcut.event || 'keydown',\n        (e: KeyboardEvent) => {\n          if (\n            ((Array.isArray(shortcut.key) &&\n              shortcut.key.some((key) => e.key == key)) ||\n              e.key == shortcut.key) &&\n            ((shortcut.alt && e.altKey) || !shortcut.alt) &&\n            ((shortcut.ctrl && e.ctrlKey) || !shortcut.ctrl) &&\n            ((shortcut.meta && e.metaKey) || !shortcut.meta) &&\n            ((shortcut.shift && e.shiftKey) || !shortcut.shift)\n          )\n            shortcut.action()\n        }\n      )\n    })\n  }, [])\n}\n\nconst shortcutKeys: ShortcutKey[] = [\n  {\n    key: 'a',\n    action: () => {\n      if (isReadMode()) setWriteMode()\n    },\n  },\n  {\n    key: ['Escape', 'b'],\n    action: () => {\n      if (isWriteMode() || isRewriteMode()) setReadMode()\n    },\n  },\n]\n\ninterface ShortcutKey {\n  key: Key | Key[]\n  action: () => void\n  event?: keyof WindowEventMap\n  alt?: boolean\n  ctrl?: boolean\n  meta?: boolean\n  shift?: boolean\n}\n"]},"metadata":{},"sourceType":"module"}